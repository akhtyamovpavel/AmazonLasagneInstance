# AmazonLasagneInstance
Мануал по поднятию инстанса на Amazon со свежей версией Lasagne на g2.2xlarge

## Вместо предисловия
Обычно бывает сложно поднять инстанс на Амазоне, особенно с поддержкой запуска на видеокарте. Есть специальные образы, но за них необходимо платить. Поэтому ниже предлагается мануал, каким образом можно установить Jupyter Notebook с фреймворком Lasagne.

## Создание инстанса
Будем создавать инстанс на сайте aws.amazon.com (если нет студенческой лицензии, то ее можно запросить доступ через AWS Educate, дают обычно около 100$).
<b>Предупреждение</b> Час работы на инстансе в регионе US составляет порядка 0.65$, поэтому используйте ресурсы с умом.
### Шаги по созданию инстанса:
1. После авторизации на сайте, вы попадаете на главный экран борды, выбрав пункт EC2. Далее необходимо нажать на кнопку "Launch Instance".
2. На шаге выбора инстанса выбираем слева пункт "Community AMI", вводим в поиск "nvidia cuda", выбираем "amzn-ami-2016.03.e-amazon-ecs-optimized-nvidia-cuda", на этом инстансе гарантирован корректный запуск.
3. Выбираем тип инстанса - g2.2xlarge, нажимаем "review and launch" (можно покопаться с доп. настройками, но выбираем не спотовый инстанс)
4. Нажимаем на кнопку "Launch", Amazon предложит создать ssh-ключ или выбрать из предложенных. При выборе нового ключа необходимо ввести ключ и сохранить приватный ключ.
5. Инстанс начал подниматься.

## Получение доступа к инстансу и установка зависимостей
1. Переходим в меню выбора инстансов (View instances)
2. В таблице появится инстанс типа g2.2xlarge, выбираем его. Снизу появится меню с описанием доступов к инстансу. Нажимаем на клавишу Connect. Копируем самую нижнюю команду и подсоединяемся по ssh (необходимо только root заменить на ec2-user). Если вы - пользовать Windows, то для соединения необходимо скачать программу Putty, ссылка для скачивания: https://the.earth.li/~sgtatham/putty/latest/w64/putty.exe
3. После коннекта на сервер, ставим anaconda (Python 3 или Python2 - версия не важна). Ссылки для скачивания:
```
wget https://repo.continuum.io/archive/Anaconda3-4.3.1-Linux-x86_64.sh # Python 3
wget https://repo.continuum.io/archive/Anaconda2-4.3.1-Linux-x86_64.sh # Python 2
```
4. Установка Anaconda:
```
bash Anaconda3-4.3.1-Linux-x86_64.sh # Для Python 3, для Python 2 аналогично
```
Желательно не прописывать в переменную PATH Anaconda, чтобы проблем с совместимостью библиотек не было.
